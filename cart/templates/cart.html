{% extends 'main.html' %}
{% load static %}
{% block content %}

<div class="container container2 mb-5">
    <div class="row">
        <section class="p-2" style="background-color: rgb(230, 217, 217)">
            <div class="container h-100">
              <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col">
                  <p><span class="h2">Shopping Cart </span><span class="h6 text-muted">({{cart_count}} item in your cart)</span></p>
                  
                  {% for cart in cart_data %}

                  <div class="card mb-4">
                    <div class="card-body p-3">
          
                      <div class="row align-items-center d-flex justify-content-evenly">

                        <div class="col-md-2">
                          <img src="{% static cart.product.image %}"
                            class="img-fluid" alt="Generic placeholder image">
                        </div>

                        <div class="col-md-2 d-flex justify-content-center">
                          <div>
                            <p class="small text-muted mb-4 pb-2">Name</p>
                            <p class="lead fw-normal mb-0">{{cart.product.title}}</p>
                          </div>
                        </div>
                    
                        <div class="col-md-2 d-flex justify-content-center">      
                          <div>
                            <p class="small text-muted mb-4 pb-2 text-center">Quantity</p>
                            <span class="lead fw-normal my-0 px-2"><a href="{% url 'decrease-quantity' cart.id %}"><i class="bi bi-file-minus-fill text-dark "></i></a></span>
                            <span class="lead fw-normal mb-0">{{cart.quantity}}</span>
                            <span class="lead fw-normal mb-0 px-2"><a href="{% url 'increase-quantity' cart.id %}"><i class="bi bi-file-plus-fill text-dark "></i></a></span>
                          </div>
                        </div>

                        <div class="col-md-2 d-flex justify-content-center">
                          <div>
                            <p class="small text-muted mb-4 pb-2">Price</p>
                            <p class="lead fw-normal mb-0">&#8377; {{cart.product.price}}</p>
                          </div>
                        </div>

                        <div class="col-md-2 d-flex justify-content-center">
                          <div>
                            <p class="small text-muted mb-4 pb-2">Total</p>
                            <p class="lead fw-normal mb-0">&#8377; {{cart.get_total_value}}</p>
                          </div>
                          {% comment %} <!-- <div>
                            <p class="small text-muted mb-4 pt-2"></p>
                            <a class="btn btn-dark" href="{% url 'remove-item-cart' cart.id %}">X</a>
                          </div> --> {% endcomment %}
                        </div>
                      </div>
          
                    </div>
                  </div>
                  {% endfor %}

                  <div class="card mb-5">
                    <div class="card-body p-4">
          
                      <div class="float-end">
                        <p class="mb-0 me-5 d-flex align-items-center">
                          <span class="small text-muted me-2">Order total:</span> <span
                            class="lead fw-normal">&#8377; {{total}}</span>
                        </p>
                      </div>
          
                    </div>
                  </div>
          
                  <div class="d-flex justify-content-end">
                    <a type="button" class="btn btn-dark btn-lg mx-2" href="{% url 'home' %}">Continue shopping</a>
                    <a type="button" class="btn btn-dark btn-lg mx-2" href="{% if cart_count > 0 %}{% url 'checkout' %}{% else %}#{% endif %}">Checkout</a>
                  </div>
          
                </div>
              </div>
            </div>
          </section>

    </div>

</div>

{% endblock %}
